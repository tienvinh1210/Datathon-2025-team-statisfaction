---
title: "EDA"
format: html
editor: visual
---

```{r, warning=FALSE}
library(tidyverse)
library(plotly)
library(GGally)
```

```{r}
data = read_csv("dynamic_supply_chain_logistics_dataset.csv")
str(data)
```

Risk classification =\> 75% high risk, 16% moderate risk, 10% low risk

```{r}
table(data$risk_classification)
ggplotly(ggplot(data, aes(x = risk_classification, y = after_stat(count / sum(count)))) +
  geom_bar(stat = "count"))
```

fuel_consumption_rate: Fuel Consumption Rate â€” float (liters/hour) Median is 5.64 Upper fence is 16.64 =\> How much of the data is outliers? 8% What causes high fuel consumption rate? CG: seems to be okay (CHECK how much is larger than 15, 12)

```{r}
# Total number of observations meet the criteria
sum(data$fuel_consumption_rate > 16.64)
# Proportion of the sample
mean(data$fuel_consumption_rate > 16.64)
```

eta_variation_hours: No outlier Median: 3.88 (not desirable?) CG -\> terrible? less than 25% acceptable (CHECK)

traffic_congestion_level: bimodal (U-shaped distribution) =\> When is it low, when is it high? (time)

warehouse_inventory_level: q1 16.05, median 157.29, q3 540.62, max 1000 Really skewed =\> What makes it so skewed? CG: bad distribution (zeros being the most common means frequent stockouts) CHECK: exact number of 0s

```{r}
sum(data$warehouse_inventory_level < 5)
mean(data$warehouse_inventory_level < 5)
```

Historical demand vs ETA Variation

```{r}
ggplot(data,
       aes(x = historical_demand,
           y = eta_variation_hours)) +
  geom_point()
```

pairing data

```{r}
GGally::ggpairs(data)
```

Correlation coefficient:No cor \> 0.05

```{r}
for (i in (4:(ncol(data)))){
  for (j in ((i+1):(ncol(data)))){
    # print(colnames(data)[i])
    # print(colnames(data)[j])
    if (i != 25 && j != 25){
      if (abs(cor(x = data[,i], y = data[,j])) > 0.05){
        print(cor(x = data[,i], y = data[,j]))
      }
    }
  }
}
```

loading_unloading_time (hours): 0.5 - 5 hours CG: half acceptable (benchmark: 2h, median: 1.92) (CHECK)

lead_time_days: 60 - 70% acceptable (CHECK)

iot temperature: CG: high cargo risk? median \< 0, what proportion is \>35 (CHECK)

customs_clearance_time: CG: check what proportion is \>3 (bottlenecks)

handling_equipment_availability: CG: terrible (q3 = 0.55 =\> only about 25% is not terrible)

order_fulfillment_status: CG: bad, median=0.68, check how much \>=0.8

port_congestion_level: really right-skewed distribution CG: \>50% terrible CHECK

cargo_condition_status CG: \>50% terrible CHECK

route_risk_level: terrible, q1 = 4.59 CG: \>50% terrible CHECK

driver_behavior_score: terrible + weird (U-shaped, bimodal, median = 0.5\>\>)

fatigue_monitoring_score: right-skewed. why 0 = more fatigue? CG CHECK

historical_demand:

shipping_costs: CG: check if left-skewed is good (exact bar values)

What drives shipping costs shipping costs vs fuel consumption rate

```{r}
# fuel consumption rate
ggplot(data,
       aes(x = fuel_consumption_rate,
           y = shipping_costs)) +
  geom_point()

# customs clearance time
ggplot(data,
       aes(x = customs_clearance_time,
           y = shipping_costs)) +
  geom_point()

# port congestion level
ggplot(data,
       aes(x = port_congestion_level,
           y = shipping_costs)) +
  geom_point()
```
